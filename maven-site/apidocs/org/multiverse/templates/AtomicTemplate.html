<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_12) on Thu Oct 29 12:06:37 CET 2009 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
AtomicTemplate (Multiverse Software Transactional Memory 0.3-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2009-10-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AtomicTemplate (Multiverse Software Transactional Memory 0.3-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AtomicTemplate.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/multiverse/templates/AbortedException.html" title="class in org.multiverse.templates"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/multiverse/templates/AtomicTemplate.InvisibleCheckedException.html" title="class in org.multiverse.templates"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/multiverse/templates/AtomicTemplate.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AtomicTemplate.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.multiverse.templates</FONT>
<BR>
Class AtomicTemplate&lt;E&gt;</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>org.multiverse.templates.AtomicTemplate&lt;E&gt;</B>
</PRE>
<HR>
<DL>
<DT><PRE>public abstract class <B>AtomicTemplate&lt;E&gt;</B><DT>extends <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
A Template that handles the boilerplate code for transactions. A transaction will be placed if none is available
 around a section and if all goes right, commits at the end.
 <p/>
 example:
 <pre>
 new AtomicTemplate(){
    Object execute(Transaction t){
        queue.push(1);
        return null;
    }
 }.execute();
 </pre>
 <p/>
 It could also be that the transaction is retried (e.g. caused by optimistic locking failures). This is also a task
 for template. In the future this retry behavior will be customizable.
 <p/>
 If a transaction already is available on the ThreadLocalTransaction, no new transaction is started and essentially
 the whole AtomicTemplate is ignored.
 <p/>
 If no transaction is available on the ThreadLocalTransaction, a new one will be created and used during the execution
 of the AtomicTemplate and will be removed once the AtomicTemplate finishes.
 <p/>
 All uncaught throwable's lead to a rollback of the transaction.
 <p/>
 AtomicTemplates are not thread-safe to use.
 <p/>
 AtomicTemplates can completely work without threadlocals. See the <A HREF="../../../org/multiverse/templates/AtomicTemplate.html#AtomicTemplate(org.multiverse.api.Stm, java.lang.String, boolean, boolean, int)"><CODE>AtomicTemplate(org.multiverse.api.Stm
 ,String, boolean, boolean, int)</CODE></A> for more information.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Peter Veentjer</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.InvisibleCheckedException.html" title="class in org.multiverse.templates">AtomicTemplate.InvisibleCheckedException</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#AtomicTemplate()">AtomicTemplate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new AtomicTemplate that uses the STM stored in the GlobalStm and works the the <A HREF="../../../org/multiverse/utils/ThreadLocalTransaction.html" title="class in org.multiverse.utils"><CODE>ThreadLocalTransaction</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#AtomicTemplate(boolean)">AtomicTemplate</A></B>(boolean&nbsp;readonly)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#AtomicTemplate(org.multiverse.api.Stm)">AtomicTemplate</A></B>(<A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api">Stm</A>&nbsp;stm)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new AtomicTemplate using the provided stm.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#AtomicTemplate(org.multiverse.api.Stm, java.lang.String, boolean, boolean, int)">AtomicTemplate</A></B>(<A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api">Stm</A>&nbsp;stm,
               <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;familyName,
               boolean&nbsp;ignoreThreadLocalTransaction,
               boolean&nbsp;readonly,
               int&nbsp;retryCount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new AtomicTemplate that uses the provided STM.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#AtomicTemplate(java.lang.String, boolean, int)">AtomicTemplate</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;familyName,
               boolean&nbsp;readonly,
               int&nbsp;retryCount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/multiverse/templates/AtomicTemplate.html" title="type parameter in AtomicTemplate">E</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#execute()">execute</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Executes the template.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;<A HREF="../../../org/multiverse/templates/AtomicTemplate.html" title="type parameter in AtomicTemplate">E</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#execute(org.multiverse.api.Transaction)">execute</A></B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the method that needs to be implemented.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/multiverse/templates/AtomicTemplate.html" title="type parameter in AtomicTemplate">E</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#executeChecked()">executeChecked</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Executes the Template and rethrows the checked exception instead of wrapping it in a InvisibleCheckedException.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#getAttemptCount()">getAttemptCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current attempt.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#getFamilyName()">getFamilyName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#getRetryCount()">getRetryCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of retries that this AtomicTemplate is allowed to do.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api">Stm</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#getStm()">getStm</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the <A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api"><CODE>Stm</CODE></A> used by this AtomicTemplate to execute transactions on.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#isIgnoreThreadLocalTransaction()">isIgnoreThreadLocalTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if this AtomicTemplate ignores the ThreadLocalTransaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#isReadonly()">isReadonly</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if this AtomicTemplate executes readonly transactions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#onFailure()">onFailure</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lifecycle method that is called when the AtomicTemplate failed to succeed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#onInit()">onInit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lifecycle method that is called when this AtomicTemplate is about to begin.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#postAbort(org.multiverse.api.Transaction)">postAbort</A></B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lifecycle method that is called when this AtomicTemplate is aborted.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#postCommit(long)">postCommit</A></B>(long&nbsp;commitVersion)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lifecycle method that is called when this AtomicTemplate has executed a commit.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#postStart(org.multiverse.api.Transaction)">postStart</A></B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lifecycle method that is called when this AtomicTemplate starts with a transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/multiverse/templates/AtomicTemplate.html#preCommit(org.multiverse.api.Transaction)">preCommit</A></B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lifecycle method that is called when this AtomicTemplate wants to execute.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AtomicTemplate()"><!-- --></A><H3>
AtomicTemplate</H3>
<PRE>
public <B>AtomicTemplate</B>()</PRE>
<DL>
<DD>Creates a new AtomicTemplate that uses the STM stored in the GlobalStm and works the the <A HREF="../../../org/multiverse/utils/ThreadLocalTransaction.html" title="class in org.multiverse.utils"><CODE>ThreadLocalTransaction</CODE></A>.
<P>
</DL>
<HR>

<A NAME="AtomicTemplate(boolean)"><!-- --></A><H3>
AtomicTemplate</H3>
<PRE>
public <B>AtomicTemplate</B>(boolean&nbsp;readonly)</PRE>
<DL>
</DL>
<HR>

<A NAME="AtomicTemplate(org.multiverse.api.Stm)"><!-- --></A><H3>
AtomicTemplate</H3>
<PRE>
public <B>AtomicTemplate</B>(<A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api">Stm</A>&nbsp;stm)</PRE>
<DL>
<DD>Creates a new AtomicTemplate using the provided stm. The transaction used is stores/retrieved from the <A HREF="../../../org/multiverse/utils/ThreadLocalTransaction.html" title="class in org.multiverse.utils"><CODE>ThreadLocalTransaction</CODE></A>.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>stm</CODE> - the stm to use for transactions.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</A></CODE> - if stm is null.</DL>
</DL>
<HR>

<A NAME="AtomicTemplate(java.lang.String, boolean, int)"><!-- --></A><H3>
AtomicTemplate</H3>
<PRE>
public <B>AtomicTemplate</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;familyName,
                      boolean&nbsp;readonly,
                      int&nbsp;retryCount)</PRE>
<DL>
</DL>
<HR>

<A NAME="AtomicTemplate(org.multiverse.api.Stm, java.lang.String, boolean, boolean, int)"><!-- --></A><H3>
AtomicTemplate</H3>
<PRE>
public <B>AtomicTemplate</B>(<A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api">Stm</A>&nbsp;stm,
                      <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;familyName,
                      boolean&nbsp;ignoreThreadLocalTransaction,
                      boolean&nbsp;readonly,
                      int&nbsp;retryCount)</PRE>
<DL>
<DD>Creates a new AtomicTemplate that uses the provided STM. This method is provided to make Multiverse easy to
 integrate with environment that don't want to depend on threadlocals.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>stm</CODE> - the stm to use for transactions.<DD><CODE>ignoreThreadLocalTransaction</CODE> - true if this Template should completely ignore the ThreadLocalTransaction.
                                     This is useful for using the AtomicTemplate in other environments that don't
                                     want to depend on threadlocals but do want to use the AtomicTemplate.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</A></CODE> - if stm is null.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getFamilyName()"><!-- --></A><H3>
getFamilyName</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getFamilyName</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getAttemptCount()"><!-- --></A><H3>
getAttemptCount</H3>
<PRE>
public final int <B>getAttemptCount</B>()</PRE>
<DL>
<DD>Returns the current attempt. Value will always be larger than zero and increases everytime the transaction needs
 to be retried.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the current attempt count.</DL>
</DD>
</DL>
<HR>

<A NAME="getRetryCount()"><!-- --></A><H3>
getRetryCount</H3>
<PRE>
public final int <B>getRetryCount</B>()</PRE>
<DL>
<DD>Returns the number of retries that this AtomicTemplate is allowed to do. The returned value will always be equal
 or larger than 0.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the number of retries.</DL>
</DD>
</DL>
<HR>

<A NAME="getStm()"><!-- --></A><H3>
getStm</H3>
<PRE>
public final <A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api">Stm</A> <B>getStm</B>()</PRE>
<DL>
<DD>Returns the <A HREF="../../../org/multiverse/api/Stm.html" title="interface in org.multiverse.api"><CODE>Stm</CODE></A> used by this AtomicTemplate to execute transactions on.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the Stm used by this AtomicTemplate.</DL>
</DD>
</DL>
<HR>

<A NAME="isIgnoreThreadLocalTransaction()"><!-- --></A><H3>
isIgnoreThreadLocalTransaction</H3>
<PRE>
public final boolean <B>isIgnoreThreadLocalTransaction</B>()</PRE>
<DL>
<DD>Check if this AtomicTemplate ignores the ThreadLocalTransaction.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if this AtomicTemplate ignores the ThreadLocalTransaction, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="isReadonly()"><!-- --></A><H3>
isReadonly</H3>
<PRE>
public final boolean <B>isReadonly</B>()</PRE>
<DL>
<DD>Checks if this AtomicTemplate executes readonly transactions.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if it executes readonly transactions, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="execute(org.multiverse.api.Transaction)"><!-- --></A><H3>
execute</H3>
<PRE>
public abstract <A HREF="../../../org/multiverse/templates/AtomicTemplate.html" title="type parameter in AtomicTemplate">E</A> <B>execute</B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)
                   throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></PRE>
<DL>
<DD>This is the method that needs to be implemented.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>t</CODE> - the transaction used for this execution.
<DT><B>Returns:</B><DD>the result of the execution.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/multiverse/templates/AtomicTemplate.InvisibleCheckedException.html" title="class in org.multiverse.templates">AtomicTemplate.InvisibleCheckedException</A></CODE> - the Exception thrown
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="onInit()"><!-- --></A><H3>
onInit</H3>
<PRE>
protected void <B>onInit</B>()</PRE>
<DL>
<DD>Lifecycle method that is called when this AtomicTemplate is about to begin. It will be called once.
 <p/>
 If this AtomicTemplate doesn't starts its own transaction, this method won't be called.
 <p/>
 If an exception is thrown while executing this method, no further execution of this AtomicTemplate
 will be done.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="postStart(org.multiverse.api.Transaction)"><!-- --></A><H3>
postStart</H3>
<PRE>
protected void <B>postStart</B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</PRE>
<DL>
<DD>Lifecycle method that is called when this AtomicTemplate starts with a transaction.
 <p/>
 It could be that this method is called more than once. For every
 <p/>
 If this AtomicTemplate doesn't starts its own transaction, this method won't be called.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>t</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="preCommit(org.multiverse.api.Transaction)"><!-- --></A><H3>
preCommit</H3>
<PRE>
protected void <B>preCommit</B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</PRE>
<DL>
<DD>Lifecycle method that is called when this AtomicTemplate wants to execute.
 <p/>
 If this AtomicTemplate doesn't starts its own transaction, this method won't be called.
 <p/>
 It could be that this method is called 0 to n times. 0 if the transaction didn't made it to the commit
 part, and for every attempt to commit.
 <p/>
 If this method throws a Throwable, the transaction will not be committed.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>t</CODE> - the Transaction that wants to commit.</DL>
</DD>
</DL>
<HR>

<A NAME="postCommit(long)"><!-- --></A><H3>
postCommit</H3>
<PRE>
protected void <B>postCommit</B>(long&nbsp;commitVersion)</PRE>
<DL>
<DD>Lifecycle method that is called when this AtomicTemplate has executed a commit. If an Throwable
 is thrown, the changes won't be rolled back because they are already committed, but since the postCommit
 logic has not executed it could leave the system that uses the STM in an inconsistent state.
 <p/>
 If this AtomicTemplate doesn't starts its own transaction, this method won't be called.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>commitVersion</CODE> - the commit version of the Transaction. Based on this version the exact state of
                      the system when the transaction committed can be determined.</DL>
</DD>
</DL>
<HR>

<A NAME="postAbort(org.multiverse.api.Transaction)"><!-- --></A><H3>
postAbort</H3>
<PRE>
protected void <B>postAbort</B>(<A HREF="../../../org/multiverse/api/Transaction.html" title="interface in org.multiverse.api">Transaction</A>&nbsp;t)</PRE>
<DL>
<DD>Lifecycle method that is called when this AtomicTemplate is aborted. This method will be called
 every time a transaction is aborted.
 <p/>
 If this AtomicTemplate doesn't starts its own transaction, this method won't be called.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>t</CODE> - the Transaction that is aborted.</DL>
</DD>
</DL>
<HR>

<A NAME="onFailure()"><!-- --></A><H3>
onFailure</H3>
<PRE>
protected void <B>onFailure</B>()</PRE>
<DL>
<DD>Lifecycle method that is called when the AtomicTemplate failed to succeed. It will be called
 at most 1 time.
 <p/>
 If this AtomicTemplate doesn't starts its own transaction, this method won't be called.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="execute()"><!-- --></A><H3>
execute</H3>
<PRE>
public final <A HREF="../../../org/multiverse/templates/AtomicTemplate.html" title="type parameter in AtomicTemplate">E</A> <B>execute</B>()</PRE>
<DL>
<DD>Executes the template.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the result of the <A HREF="../../../org/multiverse/templates/AtomicTemplate.html#execute(org.multiverse.api.Transaction)"><CODE>execute(org.multiverse.api.Transaction)</CODE></A> method.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/multiverse/templates/AtomicTemplate.InvisibleCheckedException.html" title="class in org.multiverse.templates">AtomicTemplate.InvisibleCheckedException</A></CODE> - if a checked exception was thrown while executing the <A HREF="../../../org/multiverse/templates/AtomicTemplate.html#execute(org.multiverse.api.Transaction)"><CODE>execute(org.multiverse.api.Transaction)</CODE></A> method.
<DD><CODE><A HREF="../../../org/multiverse/templates/AbortedException.html" title="class in org.multiverse.templates">AbortedException</A></CODE> - if the exception was explicitly aborted.
<DD><CODE><A HREF="../../../org/multiverse/api/exceptions/TooManyRetriesException.html" title="class in org.multiverse.api.exceptions">TooManyRetriesException</A></CODE> - if the template retried the transaction too many times. The cause of the last
                                   failure (also an exception) is included as cause. So you have some idea where
                                   to look for problems</DL>
</DD>
</DL>
<HR>

<A NAME="executeChecked()"><!-- --></A><H3>
executeChecked</H3>
<PRE>
public final <A HREF="../../../org/multiverse/templates/AtomicTemplate.html" title="type parameter in AtomicTemplate">E</A> <B>executeChecked</B>()
                       throws <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></PRE>
<DL>
<DD>Executes the Template and rethrows the checked exception instead of wrapping it in a InvisibleCheckedException.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the result
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/multiverse/templates/AtomicTemplate.InvisibleCheckedException.html" title="class in org.multiverse.templates">AtomicTemplate.InvisibleCheckedException</A></CODE> - the Exception thrown inside the <A HREF="../../../org/multiverse/templates/AtomicTemplate.html#execute(org.multiverse.api.Transaction)"><CODE>execute(org.multiverse.api.Transaction)</CODE></A>
                                 method.
<DD><CODE><A HREF="../../../org/multiverse/templates/AbortedException.html" title="class in org.multiverse.templates">AbortedException</A></CODE> - if the exception was explicitly aborted.
<DD><CODE><A HREF="../../../org/multiverse/api/exceptions/TooManyRetriesException.html" title="class in org.multiverse.api.exceptions">TooManyRetriesException</A></CODE> - if the template retried the transaction too many times. The cause of the last
                                 failure (also an exception) is included as cause. So you have some idea where to
                                 look for problems
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AtomicTemplate.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/multiverse/templates/AbortedException.html" title="class in org.multiverse.templates"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/multiverse/templates/AtomicTemplate.InvisibleCheckedException.html" title="class in org.multiverse.templates"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/multiverse/templates/AtomicTemplate.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AtomicTemplate.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2008-2009 <a href="http://multiverse.googlecode.com">Multiverse</a>. All Rights Reserved.
</BODY>
</HTML>
